{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport medFetch from \"../Actions/fetch\";\nimport PostItem from \"../Components/PostItem\";\nimport { fetchURL } from \"../config\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar isCloseToBottom = function isCloseToBottom(_ref) {\n  var layoutMeasurement = _ref.layoutMeasurement,\n      contentOffset = _ref.contentOffset,\n      contentSize = _ref.contentSize;\n  var paddingToBottom = 20;\n  return layoutMeasurement.height + contentOffset.y >= contentSize.height - 50;\n};\n\nvar loadPost = function loadPost(setPostItems, setModalVisible, PostItems) {\n  var posts = [],\n      newPostItems = [];\n  medFetch({\n    type: 'select',\n    table: 'post',\n    condition: {},\n    limit: \"\" + (PostItems.length + 5)\n  }).then(function (response) {\n    return response.json();\n  }).then(function (json) {\n    posts = json.response;\n\n    if (posts.length > PostItems.length) {\n      for (var _iterator = _createForOfIteratorHelperLoose(posts), _step; !(_step = _iterator()).done;) {\n        var item = _step.value;\n        newPostItems.push([_jsx(PostItem, {\n          item: item\n        }, item == null ? void 0 : item._id)]);\n      }\n\n      setPostItems(newPostItems);\n    }\n\n    setModalVisible(false);\n  });\n};\n\nvar Post = function Post() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      PostItems = _useState2[0],\n      setPostItems = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalVisible = _useState4[0],\n      setModalVisible = _useState4[1];\n\n  if (PostItems.length == 0) loadPost(setPostItems, setModalVisible, PostItems);\n  return _jsxs(ScrollView, {\n    onScroll: function onScroll(_ref2) {\n      var nativeEvent = _ref2.nativeEvent;\n\n      if (isCloseToBottom(nativeEvent)) {\n        loadPost(setPostItems, setModalVisible, PostItems);\n      }\n    },\n    style: {\n      flexGrow: 1\n    },\n    children: [PostItems, _jsx(Modal, {\n      animationType: \"slide\",\n      transparent: true,\n      visible: modalVisible,\n      style: {\n        position: \"absolute\"\n      },\n      children: _jsx(Text, {\n        style: {\n          margin: 20,\n          backgroundColor: \"white\",\n          borderRadius: 20,\n          padding: 35,\n          top: 200,\n          color: 'blue',\n          textAlign: 'center',\n          alignItems: \"center\",\n          shadowColor: \"#000\",\n          fontSize: 45,\n          shadowOffset: {\n            width: 0,\n            height: 2\n          }\n        },\n        children: \" Loading\"\n      })\n    })]\n  });\n};\n\nexport default Post;","map":{"version":3,"sources":["/home/ritesh/medbook/medbook-client/medbook2/medbook/src/Screens/Post.js"],"names":["useState","medFetch","PostItem","fetchURL","isCloseToBottom","layoutMeasurement","contentOffset","contentSize","paddingToBottom","height","y","loadPost","setPostItems","setModalVisible","PostItems","posts","newPostItems","type","table","condition","limit","length","then","response","json","item","push","_id","Post","modalVisible","nativeEvent","flexGrow","position","margin","backgroundColor","borderRadius","padding","top","color","textAlign","alignItems","shadowColor","fontSize","shadowOffset","width"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { View, Modal, Text } from \"react-native\"\nimport { ScrollView } from \"react-native\";\nimport medFetch from \"../Actions/fetch\";\n//import PostItem from \"./PostItem\"\nimport PostItem from \"../Components/PostItem\";\nimport { fetchURL } from \"../config\";\nconst isCloseToBottom = ({ layoutMeasurement, contentOffset, contentSize }) => {\n  const paddingToBottom = 20;\n  return layoutMeasurement.height + contentOffset.y >=\n    contentSize.height - 50;\n};\nconst loadPost = (setPostItems,setModalVisible,PostItems) => {\n  let posts=[],newPostItems=[];\n  medFetch({type:'select',table:'post',condition:{} ,limit: \"\" + (PostItems.length+5)}).then(response=>response.json()).then(json=>{posts=json.response\n    if (posts.length > PostItems.length){\n      for (let item of posts)     \n        newPostItems.push([<PostItem key={item?._id} item={item}></PostItem>])\n      setPostItems(newPostItems)\n    }\n  setModalVisible(false)})\n  }\nconst Post = () => {\n  const [PostItems, setPostItems] = useState([])\n  const [modalVisible, setModalVisible] = useState(true);\n  if (PostItems.length == 0)\n    loadPost(setPostItems, setModalVisible, PostItems);\n  return (\n    <ScrollView onScroll={({ nativeEvent }) => {\n      if (isCloseToBottom(nativeEvent)) {\n        loadPost(setPostItems, setModalVisible, PostItems)\n      }\n    }} style={{flexGrow:1}}>\n      {PostItems}\n      <Modal\n        animationType=\"slide\"\n        transparent={true}\n        visible={modalVisible}\n        style={{ position: \"absolute\" }}\n      >\n        <Text style={{\n          margin: 20,\n          backgroundColor: \"white\",\n          borderRadius: 20,\n          padding: 35,\n          top: 200,\n          color: 'blue',\n          textAlign: 'center',\n          alignItems: \"center\",\n          shadowColor: \"#000\",\n          fontSize: 45,\n          shadowOffset: {\n            width: 0,\n            height: 2\n          }\n        }}> Loading</Text>\n      </Modal>\n    </ScrollView>\n\n  )\n}\nexport default Post;"]},"metadata":{},"sourceType":"module"}